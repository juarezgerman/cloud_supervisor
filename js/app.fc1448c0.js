(function(e){function t(t){for(var r,c,i=t[0],u=t[1],s=t[2],l=0,d=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function c(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"115cb9c0"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=c(e);var s=new Error;o=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,n[1](s)}a[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"49bf":function(e,t,n){},"58dd":function(e,t,n){e.exports=n.p+"img/genesys-logo-red-152.eda4e9b8.png"},"5eef":function(e,t,n){"use strict";n("49bf")},7517:function(e,t,n){"use strict";n("f8b3")},8395:function(e,t,n){"use strict";n("dac2")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,o,c){var i=Object(r["w"])("AppHeader"),u=Object(r["w"])("router-view");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(i),Object(r["g"])(u)],64)}var o,c=n("1da1"),i=(n("96cf"),n("b85c")),u=n("53ca"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("ac1f"),n("841c"),n("159b"),n("93bf")),l={clientId:"2942f3d8-0490-47e9-8464-c8715a02b740",redirectUri:"https://juarezgerman.github.io/cloud_supervisor/"},p=new s["a"].RoutingApi,d=new s["a"].ConversationsApi,f=new s["a"].NotificationsApi,b={loginImplicitGrant:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),n=t.get("environment")||localStorage.getItem("gc-environment")||"cac1.pure.cloud",r=s["a"].ApiClient.instance,r.setPersistSettings(!0,"agent-monitoring-app"),r.setEnvironment(n),localStorage.setItem("gc-environment",n),e.next=8,r.loginImplicitGrant(l.clientId,l.redirectUri);case 8:console.log("Authenticated");case 9:case"end":return e.stop()}}),e)})))()},getConversation:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.getConversation(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},conversationsEmailParticipantReplace:function(e,t,n){return Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={queueId:n},r.prev=1,r.next=4,d.postConversationsEmailParticipantReplace(e,t,a);case 4:return r.abrupt("return","OK");case 7:return r.prev=7,r.t0=r["catch"](1),console.log("err es de tipo: "+Object(u["a"])(r.t0)),r.abrupt("return","ERROR");case 11:case"end":return r.stop()}}),r,null,[[1,7]])})))()},getQueues:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.getRoutingQueues({pageSize:100});case 2:return t=e.sent,e.abrupt("return",t.entities);case 4:case"end":return e.stop()}}),e)})))()},getQueue:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.getRoutingQueue(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},getMembersOfQueue:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.getRoutingQueueMembers(e,{pageSize:100,expand:["presence","routingStatus"]});case 2:return n=t.sent,console.log(n),t.abrupt("return",n.entities);case 5:case"end":return t.stop()}}),t)})))()},subscribeToUsersStatus:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r="",n.next=3,f.postNotificationsChannels();case 3:if(a=n.sent,a.connectUri&&a.id){n.next=6;break}throw new Error("Channel not created");case 6:return console.log("Channel created"),r=a.id,o&&o.close(),o=new WebSocket(a.connectUri),o.onmessage=function(e){var n,r=Object(i["a"])(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;a(e)}}catch(o){r.e(o)}finally{r.f()}},c=[],e.forEach((function(e){c.push({id:"v2.users.".concat(e,"?presence&routingStatus")})})),n.next=15,f.postNotificationsChannelSubscriptions(r,c);case 15:console.log("Subscribed to topics");case 16:case"end":return n.stop()}}),n)})))()}},v=n("58dd"),m=n.n(v),g=function(e){return Object(r["s"])("data-v-4c5f0ee2"),e=e(),Object(r["q"])(),e},h={class:"hero"},O=g((function(){return Object(r["e"])("img",{src:m.a,alt:"Custom app"},null,-1)})),j=g((function(){return Object(r["e"])("h1",null,"Supervisor",-1)})),w=[O,j];function y(e,t){return Object(r["p"])(),Object(r["d"])("div",h,w)}n("7517");var x=n("d959"),R=n.n(x);const k={},_=R()(k,[["render",y],["__scopeId","data-v-4c5f0ee2"]]);var C=_,S={name:"Agent Monitoring App",components:{AppHeader:C},created:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.loginImplicitGrant();case 2:history.pushState({},"",l.redirectUri);case 3:case"end":return e.stop()}}),e)})))()}};n("8395");const I=R()(S,[["render",a]]);var A=I,E=n("6c02"),P=function(e){return Object(r["s"])("data-v-c9fa81e4"),e=e(),Object(r["q"])(),e},q={class:"about"},M={class:"alert alert-success alert-dismissible"},U=P((function(){return Object(r["e"])("strong",null,"¡Aviso!",-1)})),T=Object(r["f"])(" Se procesó correctamente a la interacción seleccionada. "),N=P((function(){return Object(r["e"])("h2",{class:"view-header"},"Mover interacciones de cola",-1)})),Q=P((function(){return Object(r["e"])("br",null,null,-1)})),D=P((function(){return Object(r["e"])("label",{class:"c_label"},"Cola destino: ",-1)})),z=["value"],H=P((function(){return Object(r["e"])("br",null,null,-1)})),V=["disabled"];function G(e,t,n,a,o,c){return Object(r["p"])(),Object(r["d"])("div",q,[Object(r["E"])(Object(r["e"])("div",M,[Object(r["e"])("a",{onClick:t[0]||(t[0]=function(t){return e.mostrar_alerta=!1}),href:"#",class:"close","data-dismiss":"alert","aria-label":"close"},"×"),U,T],512),[[r["C"],e.mostrar_alerta]]),N,Object(r["E"])(Object(r["e"])("input",{class:"c_input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.conversation_id=t}),placeholder:"Conversation ID"},null,512),[[r["B"],e.conversation_id]]),Q,D,Object(r["E"])(Object(r["e"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.queue_selected=t})},[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(e.queues,(function(e){return Object(r["p"])(),Object(r["d"])("option",{key:e.key,value:e.value},Object(r["y"])(e.key),9,z)})),128))],512),[[r["A"],e.queue_selected]]),H,Object(r["e"])("button",{class:"cmd-button",onClick:t[3]||(t[3]=function(){return e.moverInteraccion&&e.moverInteraccion.apply(e,arguments)}),disabled:!e.conversation_id},"Mover",8,V)])}n("fb6a"),n("e9c4");var J=Object(r["h"])({name:"Home",data:function(){return{mostrar_alerta:!1,conversation_id:"",participant_id:"",conversation:{},queue:{},queue_selected:"",queues:[{key:"Clientes-Mail",value:"e598bc2e-e464-46e2-90b2-79c51bae5710"},{key:"Clientes-Mail-Documentacion",value:"edfb3536-3b3f-4f13-beb2-fcc2d497ec9d"},{key:"Soporte-AdministracionVentas-Mail",value:"c7e21a46-fe6f-48dc-a1fb-15433d20c46c"},{key:"Soporte-AdmPostVenta-Mail",value:"3292bd26-4149-4863-a429-1e9db5324fb2"}]}},methods:{moverInteraccion:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.getConversation(e.conversation_id);case 2:if(t.t1=n=t.sent,t.t0=null!==t.t1,!t.t0){t.next=6;break}t.t0=void 0!==n;case 6:if(!t.t0){t.next=10;break}t.t2=n,t.next=11;break;case 10:t.t2={};case 11:e.conversation=t.t2,console.log("conversation.participants: ["+e.conversation.participants.length+"]"),e.moverConversationID(e.conversation,e.queue_selected),e.conversation_id="",e.queue_selected="",e.mostrar_alerta=!0;case 17:case"end":return t.stop()}}),t)})))()},moverConversationID:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=!0,a="",o="";try{e.participants.slice().reverse().forEach((function(n){if(r){if(console.log("participant.purpose: ["+n.purpose+"]"),console.log("participant.participantId: ["+n.id+"]"),console.log("-----------------"),"acd"===n.purpose&&null!=n.queueId){var c;console.log("*** PARTICIPANTE ENCONTRADO ***"),console.log("Se mueve ixn: ["+e.id+"]"),console.log("a la cola id: ["+t+"]"),console.log("participantId a usar: ["+n.id+"]"),n.id&&(a=n.id),e.id&&(o=e.id);c=b.conversationsEmailParticipantReplace(o,a,t);r=!1}}else console.log("no analizo mas participantes")}))}catch(c){console.log("Excepcion:"+JSON.stringify(c))}case 4:case"end":return n.stop()}}),n)})))()}}});n("5eef");const L=R()(J,[["render",G],["__scopeId","data-v-c9fa81e4"]]);var B=L,K=[{path:"/",name:"Home",component:B},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],W=Object(E["a"])({history:Object(E["b"])(""),routes:K}),F=W;Object(r["c"])(A).use(F).mount("#app")},dac2:function(e,t,n){},f8b3:function(e,t,n){}});
//# sourceMappingURL=app.fc1448c0.js.map